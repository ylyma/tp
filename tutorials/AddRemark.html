<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="generator" content="MarkBind 5.1.0">
    <meta name="viewport" content="width=device-width, initial-scale=1"><title>TAfinder - Tutorial: Adding a command</title><link rel="stylesheet" href="/tp/markbind/css/bootstrap.min.css">
    <link rel="stylesheet" href="/tp/markbind/fontawesome/css/all.min.css">
    <link rel="stylesheet" href="/tp/markbind/glyphicons/css/bootstrap-glyphicons.min.css">
    <link rel="stylesheet" href="/tp/markbind/css/octicons.css">
    <link rel="stylesheet" href="/tp/markbind/material-icons/material-icons.css">
    <link rel="stylesheet" href="/tp/markbind/css/codeblock-light.min.css"><link rel="stylesheet" href="/tp/markbind/css/markbind.min.css"><script src="/tp/markbind/js/polyfill.min.js"></script>
    <script src="/tp/markbind/js/vue.min.js"></script>
    <script src="/tp/markbind/js/markbind.min.js"></script>
    <script src="AddRemark.page-vue-render.js"></script><link rel="stylesheet" href="/tp/plugins/markbind-plugin-anchors/markbind-plugin-anchors.css"><link rel="stylesheet" href="/tp/plugins/markbind-plugin-tree/markbind-plugin-tree.css">
    
  <link rel="stylesheet" href="/tp/stylesheets/main.css">
<link rel="icon" href="/tp/images/TAfinderLogo.png"></head>
<script>
  const baseUrl = '/tp'
</script>
<body >
<div id="app" data-server-rendered="true"><header sticky=""><div data-v-73b4aa16><nav class="navbar navbar-expand-md d-print-none navbar-dark bg-dark" data-v-73b4aa16><div class="container-fluid" data-v-73b4aa16><div class="navbar-left" data-v-73b4aa16><a href="/tp/index.html" title="Home" class="navbar-brand" data-v-73b4aa16>TAfinder</a></div> <div class="navbar-default" data-v-73b4aa16><ul class="navbar-nav me-auto mt-2 mt-lg-0" data-v-73b4aa16> <li data-v-73b4aa16><a href="/tp/UserGuide.html" class="nav-link" data-v-73b4aa16>User Guide</a></li> <li data-v-73b4aa16><a href="/tp/DeveloperGuide.html" class="nav-link" data-v-73b4aa16>Developer Guide</a></li> <li data-v-73b4aa16><a href="/tp/AboutUs.html" class="nav-link" data-v-73b4aa16>About Us</a></li> <li data-v-73b4aa16><a href="https://github.com/AY2324S1-CS2103T-W10-1/tp" target="_blank" class="nav-link" data-v-73b4aa16><span data-v-73b4aa16><span aria-hidden="true" class="fab fa-github" data-v-73b4aa16></span></span></a></li></ul></div> <ul class="navbar-nav navbar-right" data-v-73b4aa16><li data-v-73b4aa16><form class="navbar-form" data-v-73b4aa16><div class="dropdown" style="position:relative;" data-v-01e11c9b><input data-bs-toggle="dropdown" type="text" placeholder="Search" autocomplete="off" value="" class="form-control" data-v-01e11c9b> <div class="form-control placeholder-div-hidden" data-v-01e11c9b>
      Search
    </div> <ul class="dropdown-menu search-dropdown-menu d-none dropdown-menu-end" data-v-01e11c9b></ul></div></form></li></ul></div></nav> <div class="lower-navbar-container" style="display:none;" data-v-73b4aa16><!----> <!----></div></div></header> <div id="flex-body"><nav id="site-nav" data-v-e6005420><div class="site-nav-top" data-v-e6005420><div class="fw-bold mb-2" style="font-size:1.25rem;" data-v-e6005420>Site Map</div></div> <div class="nav-component slim-scroll" data-v-e6005420><div class="site-nav-root"><ul class="site-nav-list site-nav-list-root" data-v-e6005420><li data-v-e6005420><div onclick="handleSiteNavClick(this)" class="site-nav-default-list-item site-nav-list-item-0" data-v-e6005420><a href="/tp/index.html" data-v-e6005420>Home</a></div></li> <li data-v-e6005420><div onclick="handleSiteNavClick(this)" class="site-nav-default-list-item site-nav-list-item-0" data-v-e6005420><a href="/tp/UserGuide.html" data-v-e6005420>User Guide</a> <div class="site-nav-dropdown-btn-container" data-v-e6005420><i onclick="handleSiteNavClick(this.parentNode.parentNode, false); event.stopPropagation();" class="site-nav-dropdown-btn-icon site-nav-rotate-icon" data-v-e6005420><span aria-hidden="true" class="glyphicon glyphicon-menu-down" data-v-e6005420></span></i></div></div><ul class="site-nav-dropdown-container site-nav-dropdown-container-open site-nav-list" data-v-e6005420><li data-v-e6005420><div onclick="handleSiteNavClick(this)" class="site-nav-default-list-item site-nav-list-item-1" data-v-e6005420><a href="/tp/UserGuide.html#1-quick-start" data-v-e6005420>Quick Start</a></div></li> <li data-v-e6005420><div onclick="handleSiteNavClick(this)" class="site-nav-default-list-item site-nav-list-item-1" data-v-e6005420><a href="/tp/UserGuide.html#2-features" data-v-e6005420>Features</a></div></li> <li data-v-e6005420><div onclick="handleSiteNavClick(this)" class="site-nav-default-list-item site-nav-list-item-1" data-v-e6005420><a href="/tp/UserGuide.html#3-data-management" data-v-e6005420>Data Management</a></div></li> <li data-v-e6005420><div onclick="handleSiteNavClick(this)" class="site-nav-default-list-item site-nav-list-item-1" data-v-e6005420><a href="/tp/UserGuide.html#4-upcoming-features" data-v-e6005420>Upcoming Features</a></div></li> <li data-v-e6005420><div onclick="handleSiteNavClick(this)" class="site-nav-default-list-item site-nav-list-item-1" data-v-e6005420><a href="/tp/UserGuide.html#5-faq" data-v-e6005420>FAQ</a></div></li> <li data-v-e6005420><div onclick="handleSiteNavClick(this)" class="site-nav-default-list-item site-nav-list-item-1" data-v-e6005420><a href="/tp/UserGuide.html#6-known-issues" data-v-e6005420>Known Issues</a></div></li> <li data-v-e6005420><div onclick="handleSiteNavClick(this)" class="site-nav-default-list-item site-nav-list-item-1" data-v-e6005420><a href="/tp/UserGuide.html#7-summary" data-v-e6005420>Summary</a></div></li></ul></li> <li data-v-e6005420><div onclick="handleSiteNavClick(this)" class="site-nav-default-list-item site-nav-list-item-0" data-v-e6005420><a href="/tp/DeveloperGuide.html" data-v-e6005420>Developer Guide</a> <div class="site-nav-dropdown-btn-container" data-v-e6005420><i onclick="handleSiteNavClick(this.parentNode.parentNode, false); event.stopPropagation();" class="site-nav-dropdown-btn-icon site-nav-rotate-icon" data-v-e6005420><span aria-hidden="true" class="glyphicon glyphicon-menu-down" data-v-e6005420></span></i></div></div><ul class="site-nav-dropdown-container site-nav-dropdown-container-open site-nav-list" data-v-e6005420><li data-v-e6005420><div onclick="handleSiteNavClick(this)" class="site-nav-default-list-item site-nav-list-item-1" data-v-e6005420><a href="/tp/DeveloperGuide.html#acknowledgements" data-v-e6005420>Acknowledgements</a></div></li> <li data-v-e6005420><div onclick="handleSiteNavClick(this)" class="site-nav-default-list-item site-nav-list-item-1" data-v-e6005420><a href="/tp/DeveloperGuide.html#setting-up-getting-started" data-v-e6005420>Setting Up</a></div></li> <li data-v-e6005420><div onclick="handleSiteNavClick(this)" class="site-nav-default-list-item site-nav-list-item-1" data-v-e6005420><a href="/tp/DeveloperGuide.html#design" data-v-e6005420>Design</a></div></li> <li data-v-e6005420><div onclick="handleSiteNavClick(this)" class="site-nav-default-list-item site-nav-list-item-1" data-v-e6005420><a href="/tp/DeveloperGuide.html#implementation" data-v-e6005420>Implementation</a></div></li> <li data-v-e6005420><div onclick="handleSiteNavClick(this)" class="site-nav-default-list-item site-nav-list-item-1" data-v-e6005420><a href="/tp/DeveloperGuide.html#documentation-logging-testing-configuration-dev-ops" data-v-e6005420>Documentation, logging, testing, configuration, dev-ops</a></div></li> <li data-v-e6005420><div onclick="handleSiteNavClick(this)" class="site-nav-default-list-item site-nav-list-item-1" data-v-e6005420><a href="/tp/DeveloperGuide.html#appendix-requirements" data-v-e6005420>Appendix: Requirements</a></div></li> <li data-v-e6005420><div onclick="handleSiteNavClick(this)" class="site-nav-default-list-item site-nav-list-item-1" data-v-e6005420><a href="/tp/DeveloperGuide.html#appendix-instructions-for-manual-testing" data-v-e6005420>Appendix: Instructions for manual testing</a></div></li></ul></li> <li data-v-e6005420><div onclick="handleSiteNavClick(this)" class="site-nav-default-list-item site-nav-list-item-0" data-v-e6005420>Tutorials

<div class="site-nav-dropdown-btn-container" data-v-e6005420><i onclick="handleSiteNavClick(this.parentNode.parentNode, false); event.stopPropagation();" class="site-nav-dropdown-btn-icon" data-v-e6005420><span aria-hidden="true" class="glyphicon glyphicon-menu-down" data-v-e6005420></span></i></div></div><ul class="site-nav-dropdown-container site-nav-list" data-v-e6005420><li data-v-e6005420><div onclick="handleSiteNavClick(this)" class="site-nav-default-list-item site-nav-list-item-1" data-v-e6005420><a href="/tp/tutorials/TracingCode.html" data-v-e6005420>Tracing code</a></div></li> <li data-v-e6005420><div onclick="handleSiteNavClick(this)" class="site-nav-default-list-item site-nav-list-item-1" data-v-e6005420><a href="/tp/tutorials/AddRemark.html" data-v-e6005420>Adding a command</a></div></li> <li data-v-e6005420><div onclick="handleSiteNavClick(this)" class="site-nav-default-list-item site-nav-list-item-1" data-v-e6005420><a href="/tp/tutorials/RemovingFields.html" data-v-e6005420>Removing Fields</a></div></li></ul></li> <li data-v-e6005420><div onclick="handleSiteNavClick(this)" class="site-nav-default-list-item site-nav-list-item-0" data-v-e6005420><a href="/tp/AboutUs.html" data-v-e6005420>About Us</a></div></li> <!----></ul></div></div> <!----></nav> <div id="content-wrapper"><p>Let's walk you through the implementation of a new command‚Äâ‚Äî‚Äâ<code class="hljs inline no-lang">remark</code>.</p> <p>This command allows users of the AddressBook application to add optional remarks to people in their address book and edit it if required. The command should have the following format:</p> <p><code class="hljs inline no-lang">remark INDEX r/REMARK</code> (e.g., <code class="hljs inline no-lang">remark 2 r/Likes baseball</code>)</p> <p>We‚Äôll assume that you have already set up the development environment as outlined in the Developer‚Äôs Guide.</p> <h2 id="create-a-new-remark-command">Create a new <code class="hljs inline no-lang">remark</code> command<a href="#create-a-new-remark-command" onclick="event.stopPropagation()" class="fa fa-anchor"></a></h2> <p>Looking in the <code class="hljs inline no-lang">logic.command</code> package, you will notice that each existing command have their own class. All the commands inherit from the abstract class <code class="hljs inline no-lang">Command</code> which means that they must override <code class="hljs inline no-lang">execute()</code>. Each <code class="hljs inline no-lang">Command</code> returns an instance of <code class="hljs inline no-lang">CommandResult</code> upon success and <code class="hljs inline no-lang">CommandResult#feedbackToUser</code> is printed to the <code class="hljs inline no-lang">ResultDisplay</code>.</p> <p>Let‚Äôs start by creating a new <code class="hljs inline no-lang">RemarkCommand</code> class in the <code class="hljs inline no-lang">src/main/java/seedu/address/logic/command</code> directory.</p> <p>For now, let‚Äôs keep <code class="hljs inline no-lang">RemarkCommand</code> as simple as possible and print some output. We accomplish that by returning a <code class="hljs inline no-lang">CommandResult</code> with an accompanying message.</p> <p><strong><code class="hljs inline no-lang">RemarkCommand.java</code>:</strong></p> <pre><code class="hljs"><span>package seedu.address.logic.commands;
</span><span>
</span><span>import seedu.address.model.Model;
</span><span>
</span><span>/**
</span><span> * Changes the remark of an existing person in the address book.
</span><span> */
</span><span>public class RemarkCommand extends Command {
</span><span>
</span><span>    public static final String COMMAND_WORD = &quot;remark&quot;;
</span><span>
</span><span>    @Override
</span><span>    public CommandResult execute(Model model) {
</span><span>        return new CommandResult(&quot;Hello from remark&quot;);
</span><span>    }
</span><span>}
</span></code></pre><h3 id="hook-remarkcommand-into-the-application">Hook <code class="hljs inline no-lang">RemarkCommand</code> into the application<a href="#hook-remarkcommand-into-the-application" onclick="event.stopPropagation()" class="fa fa-anchor"></a></h3> <p>Now that we have our <code class="hljs inline no-lang">RemarkCommand</code> ready to be executed, we need to update <code class="hljs inline no-lang">AddressBookParser#parseCommand()</code> to recognize the <code class="hljs inline no-lang">remark</code> keyword. Add the new command to the <code class="hljs inline no-lang">switch</code> block by creating a new <code class="hljs inline no-lang">case</code> that returns a new instance of <code class="hljs inline no-lang">RemarkCommand</code>.</p> <p>You can refer to the changes in this <a href="https://github.com/se-edu/addressbook-level3/commit/35eb7286f18a029d39cb7a29df8f172a001e4fd8#diff-399c284cb892c20b7c04a69116fcff6ccc0666c5230a1db8e4a9145def8fa4ee">diff</a>.</p> <h3 id="run-the-application">Run the application<a href="#run-the-application" onclick="event.stopPropagation()" class="fa fa-anchor"></a></h3> <p>Run <code class="hljs inline no-lang">Main#main</code> and try out your new <code class="hljs inline no-lang">RemarkCommand</code>. If everything went well, you should see something like this:</p> <p><a href="/tp/images/add-remark/RemarkHello.png" target="_self"><img src="/tp/images/add-remark/RemarkHello.png" alt="Output displayed" class="img-fluid"></a></p> <h2 id="change-remarkcommand-to-throw-an-exception">Change <code class="hljs inline no-lang">RemarkCommand</code> to throw an exception<a href="#change-remarkcommand-to-throw-an-exception" onclick="event.stopPropagation()" class="fa fa-anchor"></a></h2> <p>While we have successfully printed a message to <code class="hljs inline no-lang">ResultDisplay</code>, the command does not do what it is supposed to do. Let‚Äôs change the command to throw a <code class="hljs inline no-lang">CommandException</code> to accurately reflect that our command is still a work in progress.</p> <p><a href="/tp/images/add-remark/RemarkCommandClass.png" target="_self"><img src="/tp/images/add-remark/RemarkCommandClass.png" alt="The relationship between RemarkCommand and Command" class="img-fluid"></a></p> <p>Following the convention in other commands, we add relevant messages as constants and use them.</p> <p><strong><code class="hljs inline no-lang">RemarkCommand.java</code>:</strong></p> <pre><code class="hljs"><span>    public static final String MESSAGE_USAGE = COMMAND_WORD
</span><span>            + &quot;: Edits the remark of the person identified &quot;
</span><span>            + &quot;by the index number used in the last person listing. &quot;
</span><span>            + &quot;Existing remark will be overwritten by the input.\n&quot;
</span><span>            + &quot;Parameters: INDEX (must be a positive integer) &quot;
</span><span>            + &quot;r/ [REMARK]\n&quot;
</span><span>            + &quot;Example: &quot; + COMMAND_WORD + &quot; 1 &quot;
</span><span>            + &quot;r/ Likes to swim.&quot;;
</span><span>
</span><span>    public static final String MESSAGE_NOT_IMPLEMENTED_YET =
</span><span>            &quot;Remark command not implemented yet&quot;;
</span><span>
</span><span>    @Override
</span><span>    public CommandResult execute(Model model) throws CommandException {
</span><span>        throw new CommandException(MESSAGE_NOT_IMPLEMENTED_YET);
</span><span>    }
</span></code></pre><h2 id="enhancing-remarkcommand">Enhancing <code class="hljs inline no-lang">RemarkCommand</code><a href="#enhancing-remarkcommand" onclick="event.stopPropagation()" class="fa fa-anchor"></a></h2> <p>Let‚Äôs change <code class="hljs inline no-lang">RemarkCommand</code> to parse input from the user.</p> <h3 id="make-the-command-accept-parameters">Make the command accept parameters<a href="#make-the-command-accept-parameters" onclick="event.stopPropagation()" class="fa fa-anchor"></a></h3> <p>We start by modifying the constructor of <code class="hljs inline no-lang">RemarkCommand</code> to accept an <code class="hljs inline no-lang">Index</code> and a <code class="hljs inline no-lang">String</code>. While we are at it, let‚Äôs change the error message to echo the values. While this is not a replacement for tests, it is an obvious way to tell if our code is functioning as intended.</p> <pre><code class="hljs"><span>import static seedu.address.commons.util.CollectionUtil.requireAllNonNull;
</span><span>//...
</span><span>public class RemarkCommand extends Command {
</span><span>    //...
</span><span>    public static final String MESSAGE_ARGUMENTS = &quot;Index: %1$d, Remark: %2$s&quot;;
</span><span>
</span><span>    private final Index index;
</span><span>    private final String remark;
</span><span>
</span><span>    /**
</span><span>     * @param index of the person in the filtered person list to edit the remark
</span><span>     * @param remark of the person to be updated to
</span><span>     */
</span><span>    public RemarkCommand(Index index, String remark) {
</span><span>        requireAllNonNull(index, remark);
</span><span>
</span><span>        this.index = index;
</span><span>        this.remark = remark;
</span><span>    }
</span><span>    @Override
</span><span>    public CommandResult execute(Model model) throws CommandException {
</span><span>        throw new CommandException(
</span><span>                String.format(MESSAGE_ARGUMENTS, index.getOneBased(), remark));
</span><span>    }
</span><span>
</span><span>    @Override
</span><span>    public boolean equals(Object other) {
</span><span>        if (other == this) {
</span><span>            return true;
</span><span>        }
</span><span>
</span><span>        // instanceof handles nulls
</span><span>        if (!(other instanceof RemarkCommand)) {
</span><span>            return false;
</span><span>        }
</span><span>
</span><span>        RemarkCommand e = (RemarkCommand) other;
</span><span>        return index.equals(e.index)
</span><span>                &amp;&amp; remark.equals(e.remark);
</span><span>    }
</span><span>}
</span></code></pre><p>Your code should look something like <a href="https://github.com/se-edu/addressbook-level3/commit/dc6d5139d08f6403da0ec624ea32bd79a2ae0cbf#diff-a8e35af8f9c251525063fae36c9852922a7e7195763018eacec60f3a4d87c594">this</a> after you are done.</p> <h3 id="parse-user-input">Parse user input<a href="#parse-user-input" onclick="event.stopPropagation()" class="fa fa-anchor"></a></h3> <p>Now let‚Äôs move on to writing a parser that will extract the index and remark from the input provided by the user.</p> <p>Create a <code class="hljs inline no-lang">RemarkCommandParser</code> class in the <code class="hljs inline no-lang">seedu.address.logic.parser</code> package. The class must extend the <code class="hljs inline no-lang">Parser</code> interface.</p> <p><a href="/tp/images/add-remark/RemarkCommandParserClass.png" target="_self"><img src="/tp/images/add-remark/RemarkCommandParserClass.png" alt="The relationship between Parser and RemarkCommandParser" class="img-fluid"></a></p> <p>Thankfully, <code class="hljs inline no-lang">ArgumentTokenizer#tokenize()</code> makes it trivial to parse user input. Let‚Äôs take a look at the JavaDoc provided for the function to understand what it does.</p> <p><strong><code class="hljs inline no-lang">ArgumentTokenizer.java</code>:</strong></p> <pre><code class="hljs"><span>/**
</span><span> * Tokenizes an arguments string and returns an {@code ArgumentMultimap}
</span><span> * object that maps prefixes to their respective argument values. Only the
</span><span> * given prefixes will be recognized in the arguments string.
</span><span> *
</span><span> * @param argsString Arguments string of the form:
</span><span> * {@code preamble &lt;prefix&gt;value &lt;prefix&gt;value ...}
</span><span> * @param prefixes   Prefixes to tokenize the arguments string with
</span><span> * @return           ArgumentMultimap object that maps prefixes to their
</span><span> * arguments
</span><span> */
</span></code></pre><p>We can tell <code class="hljs inline no-lang">ArgumentTokenizer#tokenize()</code> to look out for our new prefix <code class="hljs inline no-lang">r/</code> and it will return us an instance of <code class="hljs inline no-lang">ArgumentMultimap</code>. Now let‚Äôs find out what we need to do in order to obtain the Index and String that we need. Let‚Äôs look through <code class="hljs inline no-lang">ArgumentMultimap</code> :</p> <p><strong><code class="hljs inline no-lang">ArgumentMultimap.java</code>:</strong></p> <pre><code class="hljs"><span>/**
</span><span> * Returns the last value of {@code prefix}.
</span><span> */
</span><span>public Optional&lt;String&gt; getValue(Prefix prefix) {
</span><span>    List&lt;String&gt; values = getAllValues(prefix);
</span><span>    return values.isEmpty() ? Optional.empty() :
</span><span>        Optional.of(values.get(values.size() - 1));
</span><span>}
</span></code></pre><p>This appears to be what we need to get a String of the remark. But what about the Index? Let's take a quick peek at existing <code class="hljs inline no-lang">Command</code> that uses an index to see how it is done.</p> <p><strong><code class="hljs inline no-lang">DeleteCommandParser.java</code>:</strong></p> <pre><code class="hljs"><span>Index index = ParserUtil.parseIndex(args);
</span><span>return new DeleteCommand(index);
</span></code></pre><p>There appears to be another utility class that obtains an <code class="hljs inline no-lang">Index</code> from the input provided by the user.</p> <p>Now that we have the know-how to extract the data that we need from the user‚Äôs input, we can parse the user command and create a new instance of <code class="hljs inline no-lang">RemarkCommand</code>, as given below.</p> <p><strong><code class="hljs inline no-lang">RemarkCommandParser.java</code>:</strong></p> <pre><code class="hljs"><span>public RemarkCommand parse(String args) throws ParseException {
</span><span>    requireNonNull(args);
</span><span>    ArgumentMultimap argMultimap = ArgumentTokenizer.tokenize(args,
</span><span>        PREFIX_REMARK);
</span><span>
</span><span>    Index index;
</span><span>    try {
</span><span>        index = ParserUtil.parseIndex(argMultimap.getPreamble());
</span><span>    } catch (IllegalValueException ive) {
</span><span>        throw new ParseException(String.format(MESSAGE_INVALID_COMMAND_FORMAT,
</span><span>            RemarkCommand.MESSAGE_USAGE), ive);
</span><span>    }
</span><span>
</span><span>    String remark = argMultimap.getValue(PREFIX_REMARK).orElse(&quot;&quot;);
</span><span>
</span><span>    return new RemarkCommand(index, remark);
</span><span>}
</span></code></pre><div markdown="span" class="alert alert-primary"><p>‚ÑπÔ∏è Don‚Äôt forget to update <code class="hljs inline no-lang">AddressBookParser</code> to use our new <code class="hljs inline no-lang">RemarkCommandParser</code>!</p></div> <p>If you are stuck, check out the sample
<a href="https://github.com/se-edu/addressbook-level3/commit/dc6d5139d08f6403da0ec624ea32bd79a2ae0cbf#diff-8bf239e8e9529369b577701303ddd96af93178b4ed6735f91c2d8488b20c6b4a">here</a>.</p> <h2 id="add-remark-to-the-model">Add <code class="hljs inline no-lang">Remark</code> to the model<a href="#add-remark-to-the-model" onclick="event.stopPropagation()" class="fa fa-anchor"></a></h2> <p>Now that we have all the information that we need, let‚Äôs lay the groundwork for propagating the remarks added into the in-memory storage of person data. We achieve that by working with the <code class="hljs inline no-lang">Person</code> model. Each field in a Person is implemented as a separate class (e.g. a <code class="hljs inline no-lang">Name</code> object represents the person‚Äôs name). That means we should add a <code class="hljs inline no-lang">Remark</code> class so that we can use a <code class="hljs inline no-lang">Remark</code> object to represent a remark given to a person.</p> <h3 id="add-a-new-remark-class">Add a new <code class="hljs inline no-lang">Remark</code> class<a href="#add-a-new-remark-class" onclick="event.stopPropagation()" class="fa fa-anchor"></a></h3> <p>Create a new <code class="hljs inline no-lang">Remark</code> in <code class="hljs inline no-lang">seedu.address.model.person</code>. Since a <code class="hljs inline no-lang">Remark</code> is a field that is similar to <code class="hljs inline no-lang">Address</code>, we can reuse a significant bit of code.</p> <p>A copy-paste and search-replace later, you should have something like <a href="https://github.com/se-edu/addressbook-level3/commit/4516e099699baa9e2d51801bd26f016d812dedcc#diff-41bb13c581e280c686198251ad6cc337cd5e27032772f06ed9bf7f1440995ece">this</a>. Note how <code class="hljs inline no-lang">Remark</code> has no constrains and thus does not require input
validation.</p> <h3 id="make-use-of-remark">Make use of <code class="hljs inline no-lang">Remark</code><a href="#make-use-of-remark" onclick="event.stopPropagation()" class="fa fa-anchor"></a></h3> <p>Let‚Äôs change <code class="hljs inline no-lang">RemarkCommand</code> and <code class="hljs inline no-lang">RemarkCommandParser</code> to use the new <code class="hljs inline no-lang">Remark</code> class instead of plain <code class="hljs inline no-lang">String</code>. These should be relatively simple changes.</p> <h2 id="add-a-placeholder-element-for-remark-to-the-ui">Add a placeholder element for remark to the UI<a href="#add-a-placeholder-element-for-remark-to-the-ui" onclick="event.stopPropagation()" class="fa fa-anchor"></a></h2> <p>Without getting too deep into <code class="hljs inline no-lang">fxml</code>, let‚Äôs go on a 5 minute adventure to get some placeholder text to show up for each person.</p> <p>Simply add the following to <a href="https://github.com/se-edu/addressbook-level3/commit/850b78879582f38accb05dd20c245963c65ea599#diff-639834f1e05afe2276a86372adf0fe5f69314642c2d93cfa543d614ce5a76688"><code class="hljs inline no-lang">seedu.address.ui.PersonCard</code></a>.</p> <p><strong><code class="hljs inline no-lang">PersonCard.java</code>:</strong></p> <pre><code class="hljs"><span>@FXML
</span><span>private Label remark;
</span></code></pre><p><code class="hljs inline no-lang">@FXML</code> is an annotation that marks a private or protected field and makes it accessible to FXML. It might sound like Greek to you right now, don‚Äôt worry‚Äâ‚Äî‚Äâwe will get back to it later.</p> <p>Then insert the following into <a href="https://github.com/se-edu/addressbook-level3/commit/850b78879582f38accb05dd20c245963c65ea599#diff-d44c4f51c24f6253c277a2bb9bc440b8064d9c15ad7cb7ceda280bca032efce9"><code class="hljs inline no-lang">main/resources/view/PersonListCard.fxml</code></a>.</p> <p><strong><code class="hljs inline no-lang">PersonListCard.fxml</code>:</strong></p> <pre><code class="hljs"><span>&lt;Label fx:id=&quot;remark&quot; styleClass=&quot;cell-small-label&quot; text=&quot;\$remark&quot; /&gt;
</span></code></pre><p>That‚Äôs it! Fire up the application again and you should see something like this:</p> <p>![<eq><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>r</mi><mi>e</mi><mi>m</mi><mi>a</mi><mi>r</mi><mi>k</mi><mi>s</mi><mi>h</mi><mi>o</mi><mi>w</mi><mi>s</mi><mi>u</mi><mi>p</mi><mi>i</mi><mi>n</mi><mi>e</mi><mi>a</mi><mi>c</mi><mi>h</mi><mi>e</mi><mi>n</mi><mi>t</mi><mi>r</mi><mi>y</mi><mo stretchy="false">]</mo><mo stretchy="false">(</mo><mi mathvariant="normal">.</mi><mi mathvariant="normal">.</mi><mi mathvariant="normal">/</mi><mi>i</mi><mi>m</mi><mi>a</mi><mi>g</mi><mi>e</mi><mi>s</mi><mi mathvariant="normal">/</mi><mi>a</mi><mi>d</mi><mi>d</mi><mo>‚àí</mo><mi>r</mi><mi>e</mi><mi>m</mi><mi>a</mi><mi>r</mi><mi>k</mi><mi mathvariant="normal">/</mi></mrow><annotation encoding="application/x-tex" v-pre="">remark shows up in each entry](../images/add-remark/</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut"></span><span class="mord mathnormal">re</span><span class="mord mathnormal">ma</span><span class="mord mathnormal">r</span><span class="mord mathnormal">k</span><span class="mord mathnormal">s</span><span class="mord mathnormal">h</span><span class="mord mathnormal">o</span><span class="mord mathnormal">w</span><span class="mord mathnormal">s</span><span class="mord mathnormal">u</span><span class="mord mathnormal">p</span><span class="mord mathnormal">in</span><span class="mord mathnormal">e</span><span class="mord mathnormal">a</span><span class="mord mathnormal">c</span><span class="mord mathnormal">h</span><span class="mord mathnormal">e</span><span class="mord mathnormal">n</span><span class="mord mathnormal">t</span><span class="mord mathnormal">ry</span><span class="mclose">]</span><span class="mopen">(</span><span class="mord">../</span><span class="mord mathnormal">ima</span><span class="mord mathnormal">g</span><span class="mord mathnormal">es</span><span class="mord">/</span><span class="mord mathnormal">a</span><span class="mord mathnormal">dd</span><span class="mspace"></span><span class="mbin">‚àí</span><span class="mspace"></span></span><span class="base"><span class="strut"></span><span class="mord mathnormal">re</span><span class="mord mathnormal">ma</span><span class="mord mathnormal">r</span><span class="mord mathnormal">k</span><span class="mord">/</span></span></span></span></eq>Remark.png)</p> <h2 id="modify-person-to-support-a-remark-field">Modify <code class="hljs inline no-lang">Person</code> to support a <code class="hljs inline no-lang">Remark</code> field<a href="#modify-person-to-support-a-remark-field" onclick="event.stopPropagation()" class="fa fa-anchor"></a></h2> <p>Since <code class="hljs inline no-lang">PersonCard</code> displays data from a <code class="hljs inline no-lang">Person</code>, we need to update <code class="hljs inline no-lang">Person</code> to get our <code class="hljs inline no-lang">Remark</code> displayed!</p> <h3 id="modify-person">Modify <code class="hljs inline no-lang">Person</code><a href="#modify-person" onclick="event.stopPropagation()" class="fa fa-anchor"></a></h3> <p>We change the constructor of <code class="hljs inline no-lang">Person</code> to take a <code class="hljs inline no-lang">Remark</code>. We will also need to define new fields and accessors accordingly to store our new addition.</p> <h3 id="update-other-usages-of-person">Update other usages of <code class="hljs inline no-lang">Person</code><a href="#update-other-usages-of-person" onclick="event.stopPropagation()" class="fa fa-anchor"></a></h3> <p>Unfortunately, a change to <code class="hljs inline no-lang">Person</code> will cause other commands to break, you will have to modify these commands to use the updated <code class="hljs inline no-lang">Person</code>!</p> <div markdown="span" class="alert alert-primary"><p>üí° Use the <code class="hljs inline no-lang">Find Usages</code> feature in IntelliJ IDEA on the <code class="hljs inline no-lang">Person</code> class to find these commands.</p></div> <p>Refer to <a href="https://github.com/se-edu/addressbook-level3/commit/ce998c37e65b92d35c91d28c7822cd139c2c0a5c">this commit</a> and check that you have got everything in order!</p> <h2 id="updating-storage">Updating Storage<a href="#updating-storage" onclick="event.stopPropagation()" class="fa fa-anchor"></a></h2> <p>AddressBook stores data by serializing <code class="hljs inline no-lang">JsonAdaptedPerson</code> into <code class="hljs inline no-lang">json</code> with the help of an external library‚Äâ‚Äî‚ÄâJackson. Let‚Äôs update <code class="hljs inline no-lang">JsonAdaptedPerson</code> to work with our new <code class="hljs inline no-lang">Person</code>!</p> <p>While the changes to code may be minimal, the test data will have to be updated as well.</p> <div markdown="span" class="alert alert-warning"><p>‚ùóÔ∏è You must delete AddressBook‚Äôs storage file located at <code class="hljs inline no-lang">/data/addressbook.json</code> before running it! Not doing so will cause AddressBook to default to an empty address book!</p></div> <p>Check out <a href="https://github.com/se-edu/addressbook-level3/commit/556cbd0e03ff224d7a68afba171ad2eb0ce56bbf">this commit</a>
to see what the changes entail.</p> <h2 id="finalizing-the-ui">Finalizing the UI<a href="#finalizing-the-ui" onclick="event.stopPropagation()" class="fa fa-anchor"></a></h2> <p>Now that we have finalized the <code class="hljs inline no-lang">Person</code> class and its dependencies, we can now bind the <code class="hljs inline no-lang">Remark</code> field to the UI.</p> <p>Just add <a href="https://github.com/se-edu/addressbook-level3/commit/5b98fee11b6b3f5749b6b943c4f3bd3aa049b692">this one line of code!</a></p> <p><strong><code class="hljs inline no-lang">PersonCard.java</code>:</strong></p> <pre><code class="hljs"><span>public PersonCard(Person person, int displayedIndex) {
</span><span>    //...
</span><span>    remark.setText(person.getRemark().value);
</span><span>}
</span></code></pre><p><a href="/tp/images/add-remark/RemarkBound.png" target="_self"><img src="/tp/images/add-remark/RemarkBound.png" alt="The remark label is bound properly!" class="img-fluid"></a></p> <h2 id="putting-everything-together">Putting everything together<a href="#putting-everything-together" onclick="event.stopPropagation()" class="fa fa-anchor"></a></h2> <p>After the previous step, we notice a peculiar regression‚Äâ‚Äî‚Äâwe went from displaying something to nothing at all. However, this is expected behavior as we are yet to update the <code class="hljs inline no-lang">RemarkCommand</code> to make use of the code we've been adding in the last few steps.</p> <h3 id="update-remarkcommand-and-remarkcommandparser">Update <code class="hljs inline no-lang">RemarkCommand</code> and <code class="hljs inline no-lang">RemarkCommandParser</code><a href="#update-remarkcommand-and-remarkcommandparser" onclick="event.stopPropagation()" class="fa fa-anchor"></a></h3> <p>In this last step, we modify <code class="hljs inline no-lang">RemarkCommand#execute()</code> to change the <code class="hljs inline no-lang">Remark</code> of a <code class="hljs inline no-lang">Person</code>. Since all fields in a <code class="hljs inline no-lang">Person</code> are immutable, we create a new instance of a <code class="hljs inline no-lang">Person</code> with the values that we want and
save it with <code class="hljs inline no-lang">Model#setPerson()</code>.</p> <p><strong><code class="hljs inline no-lang">RemarkCommand.java</code>:</strong></p> <pre><code class="hljs"><span>//...
</span><span>    public static final String MESSAGE_ADD_REMARK_SUCCESS = &quot;Added remark to Person: %1$s&quot;;
</span><span>    public static final String MESSAGE_DELETE_REMARK_SUCCESS = &quot;Removed remark from Person: %1$s&quot;;
</span><span>//...
</span><span>    @Override
</span><span>    public CommandResult execute(Model model) throws CommandException {
</span><span>        List&lt;Person&gt; lastShownList = model.getFilteredPersonList();
</span><span>
</span><span>        if (index.getZeroBased() &gt;= lastShownList.size()) {
</span><span>            throw new CommandException(Messages.MESSAGE_INVALID_PERSON_DISPLAYED_INDEX);
</span><span>        }
</span><span>
</span><span>        Person personToEdit = lastShownList.get(index.getZeroBased());
</span><span>        Person editedPerson = new Person(
</span><span>                personToEdit.getName(), personToEdit.getPhone(), personToEdit.getEmail(),
</span><span>                personToEdit.getAddress(), remark, personToEdit.getTags());
</span><span>
</span><span>        model.setPerson(personToEdit, editedPerson);
</span><span>        model.updateFilteredPersonList(PREDICATE_SHOW_ALL_PERSONS);
</span><span>
</span><span>        return new CommandResult(generateSuccessMessage(editedPerson));
</span><span>    }
</span><span>
</span><span>    /**
</span><span>     * Generates a command execution success message based on whether
</span><span>     * the remark is added to or removed from
</span><span>     * {@code personToEdit}.
</span><span>     */
</span><span>    private String generateSuccessMessage(Person personToEdit) {
</span><span>        String message = !remark.value.isEmpty() ? MESSAGE_ADD_REMARK_SUCCESS : MESSAGE_DELETE_REMARK_SUCCESS;
</span><span>        return String.format(message, personToEdit);
</span><span>    }
</span></code></pre><p><a href="/tp/images/add-remark/RemarkComplete.png" target="_self"><img src="/tp/images/add-remark/RemarkComplete.png" alt="Congratulations!" class="img-fluid"></a></p> <h2 id="writing-tests">Writing tests<a href="#writing-tests" onclick="event.stopPropagation()" class="fa fa-anchor"></a></h2> <p>Tests are crucial to ensuring that bugs don‚Äôt slip into the codebase unnoticed. This is especially true for large code bases where a change might lead to unintended behavior.</p> <p>Let‚Äôs verify the correctness of our code by writing some tests!</p> <p>Of course you can simply add the test cases manually, like you've been doing all along this tutorial. The result would be like the test cases in <a href="https://github.com/se-edu/addressbook-level3/commit/fac8f3fd855d55831ca0cc73313b5943d49d4d6e#diff-ff58f7c10338b34f76645df49b71ecb2bafaf7611b20e7ff59ebc98475538a01">here</a>. Alternatively, you can get the help of IntelliJ to generate the skeletons of the test cases, as explained in the next section.</p> <h3 id="automatically-generating-tests">Automatically generating tests<a href="#automatically-generating-tests" onclick="event.stopPropagation()" class="fa fa-anchor"></a></h3> <p>The goal is to write effective and efficient tests to ensure that <code class="hljs inline no-lang">RemarkCommand#execute()</code> behaves as expected.</p> <p>The convention for test names is <code class="hljs inline no-lang">methodName_testScenario_expectedResult</code>. An example would be
<code class="hljs inline no-lang">execute_filteredList_success</code>.</p> <p>Let‚Äôs create a test for <code class="hljs inline no-lang">RemarkCommand#execute()</code> to test that adding a remark works. On <code class="hljs inline no-lang">IntelliJ IDEA</code> you can bring up the context menu and choose to <code class="hljs inline no-lang">Go To</code> &gt; <code class="hljs inline no-lang">Test</code> or use the appropriate keyboard shortcut.</p> <p><a href="/tp/images/add-remark/ContextMenu.png" target="_self"><img src="/tp/images/add-remark/ContextMenu.png" alt="Using the context menu to jump to tests" class="img-fluid"></a></p> <p>Then, create a test for the <code class="hljs inline no-lang">execute</code> method.</p> <p><a href="/tp/images/add-remark/CreateTest.png" target="_self"><img src="/tp/images/add-remark/CreateTest.png" alt="Creating a test for `execute`." class="img-fluid"></a></p> <p>Following convention, let‚Äôs change the name of the generated method to <code class="hljs inline no-lang">execute_addRemarkUnfilteredList_success</code>.</p> <p>Let‚Äôs use the utility functions provided in <code class="hljs inline no-lang">CommandTestUtil</code>. The functions ensure that commands produce the expected <code class="hljs inline no-lang">CommandResult</code> and output the correct message. In this case, <code class="hljs inline no-lang">CommandTestUtil#assertCommandSuccess</code> is the best fit as we are testing that a <code class="hljs inline no-lang">RemarkCommand</code> will successfully add a <code class="hljs inline no-lang">Remark</code>.</p> <p>You should end up with a test that looks something like <a href="https://github.com/se-edu/addressbook-level3/commit/fac8f3fd855d55831ca0cc73313b5943d49d4d6e#diff-ff58f7c10338b34f76645df49b71ecb2bafaf7611b20e7ff59ebc98475538a01R36-R49">this</a>.</p> <h2 id="conclusion">Conclusion<a href="#conclusion" onclick="event.stopPropagation()" class="fa fa-anchor"></a></h2> <p>This concludes the tutorial for adding a new <code class="hljs inline no-lang">Command</code> to AddressBook.</p></div> <nav id="page-nav" data-v-e6005420><div class="nav-component slim-scroll" data-v-e6005420></div> <!----></nav> <div aria-hidden="true" class="scroll-top-button fa-lg d-print-none" style="display:none;bottom:2%;right:2%;position:fixed;"><i class="fas fa-arrow-circle-up"></i></div></div> <footer><div class="text-center"><small>[<span><strong>Powered by</strong></span> <img src="https://markbind.org/favicon.ico" width="30"> <a href="https://markbind.org/">MarkBind 5.1.0</a>, generated on Mon, 6 Nov 2023, 20:02:25 GMT+8]</small></div></footer></div>
</body><script src="/tp/markbind/js/bootstrap-utility.min.js"></script>
<script>
  MarkBind.setupWithSearch()
</script>
</html>
